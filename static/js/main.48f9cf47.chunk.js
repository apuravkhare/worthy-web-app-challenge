(this["webpackJsonpworthy-web-app-challenge"]=this["webpackJsonpworthy-web-app-challenge"]||[]).push([[0],{100:function(e,t,n){"use strict";n.r(t);var s=n(0),i=n.n(s),a=n(14),c=n.n(a),r=(n(74),n(12)),l=n(16),o=n(19),d=n(18),h=(n(75),n(76),n(77),n(50)),j=n(31),u=function e(t,n,s,i,a,c,l){Object(r.a)(this,e),this.id=t,this.type=n,this.userId=s,this.title=i,this.caption=a,this.url=c,this.tags=l},b=n(41),m=n(23),p=n(25),g=function e(t,n){Object(r.a)(this,e),this.id=t,this.userName=n},O=n(112),x=n(113),f=n(110),v=n(111),w=n(109),y=n(105),T=n(3),S=function(e){Object(o.a)(n,e);var t=Object(d.a)(n);function n(e){var s;return Object(r.a)(this,n),(s=t.call(this,e)).popover=Object(T.jsx)(O.a,{id:"popover-basic",children:Object(T.jsx)(O.a.Content,{children:Object(T.jsxs)(x.a,{children:[Object(T.jsx)(x.a.Item,{action:!0,children:"View Profile"}),Object(T.jsx)(x.a.Item,{action:!0,children:"Settings"}),Object(T.jsx)(x.a.Item,{action:!0,children:"Logout"})]})})}),s.state={loggedInUser:e.loggedInUser,renderHome:e.renderHome,renderShare:e.renderShare,renderDiscover:e.renderDiscover,searchCriteria:"",showPopup:!1},s}return Object(l.a)(n,[{key:"render",value:function(){var e=this;return Object(T.jsxs)(f.a,{fixed:"top",bg:"dark",variant:"dark",children:[Object(T.jsxs)(v.a,{className:"mr-auto",children:[Object(T.jsx)(v.a.Link,{style:{visibility:this.state.renderHome?"visible":"collapse"},href:"/",children:"Home"}),Object(T.jsx)(v.a.Link,{style:{visibility:this.state.renderShare?"visible":"collapse"},href:"/share",children:"Share"}),Object(T.jsx)(v.a.Link,{style:{visibility:this.state.renderDiscover?"visible":"collapse"},href:"/discover",children:"Discover"})]}),Object(T.jsx)(v.a,{children:Object(T.jsx)(w.a,{trigger:"click",placement:"bottom",overlay:this.popover,transition:!1,children:Object(T.jsx)(y.a,{variant:"outline-dark",style:{color:"grey"},onClick:function(t){return e.setState({showPopup:!e.state.showPopup})},children:Object(T.jsx)(m.a,{className:"mt-2",icon:p.e,size:"2x"})})})})]})}}]),n}(s.Component),k={useApi:!1,apiUrl:"https://localhost:44351/api"};Object.freeze(k);var I=k,C=function(){function e(){Object(r.a)(this,e)}return Object(l.a)(e,[{key:"getAllTags",value:function(e){fetch("mediaTags.json",{headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){return e.json()})).then((function(t){e(t.tags)})).catch((function(e){console.error(e)}))}}]),e}(),N=n(68),U=function(e){Object(o.a)(n,e);var t=Object(d.a)(n);function n(e){var s;return Object(r.a)(this,n),(s=t.call(this,e)).renderTags=function(){return s.state.allTags.map((function(e,t){return Object(T.jsx)(N.b,{onClick:function(t){return!s.state.disableToggle&&s.toggleSelect(t,e)},look:e.isSelected?"filled":"outlined",className:"m-1",text:e.text},t)}))},s.state={allTags:e.tagsToRender||[],onToggle:e.onToggle,disableToggle:e.disableToggle,toggleSelectHandler:e.onToggleSelect},s}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.state.allTags&&this.state.allTags.length>0?this.setState({allTags:this.state.allTags.map((function(e){return{text:e,isSelected:!0}}))}):(new C).getAllTags((function(t){return e.setState({allTags:t.map((function(e){return{text:e,isSelected:!1}}))})}))}},{key:"toggleSelect",value:function(e,t){t.isSelected=!t.isSelected,this.setState({allTags:this.state.allTags}),this.state.toggleSelectHandler&&this.state.toggleSelectHandler(this.state.allTags)}},{key:"render",value:function(){return Object(T.jsx)("div",{className:"border border-light rounded",children:this.renderTags()})}}]),n}(s.Component),L=function(e){Object(o.a)(n,e);var t=Object(d.a)(n);function n(e){var s;return Object(r.a)(this,n),(s=t.call(this,e)).header=function(){return Object(T.jsx)(h.c,{className:"h-25",children:Object(T.jsx)("h3",{children:"Recommended for you"})})},s.footer=function(){return Object(T.jsx)(h.b,{children:"Load more"})},s.itemRenderer=function(e){var t=e.dataItem,n=s.fetchUser(t.userId);return Object(T.jsx)("div",{className:"w-75 mt-4 mb-4",style:{marginLeft:"12%"},children:Object(T.jsxs)(j.b,{children:[Object(T.jsxs)(j.e,{className:"k-hbox",style:{background:"transparent"},children:[Object(T.jsx)(j.a,{type:"image",size:"medium",shape:"circle",children:s.fetchUserImage(t.userId)}),Object(T.jsxs)("div",{children:[Object(T.jsx)(j.g,{className:"text-left",style:{marginBottom:"4px"},children:t.title}),Object(T.jsx)(j.f,{className:"text-left",children:Object(T.jsx)("p",{children:n.userName})})]})]}),Object(T.jsxs)(j.d,{children:[Object(T.jsx)(b.ReactTinyLink,{cardSize:"small",showGraphic:!0,maxLine:2,minLine:1,url:t.url}),Object(T.jsx)("div",{className:"mt-2 ml-2 text-left",children:Object(T.jsx)(U,{disableToggle:!0,tagsToRender:t.tags})}),Object(T.jsx)("div",{className:"mt-2 ml-2 text-left",children:Object(T.jsx)("p",{children:t.caption})})]}),Object(T.jsxs)(j.c,{style:{display:"flex",justifyContent:"space-between"},children:[Object(T.jsxs)("div",{children:[Object(T.jsx)("button",{title:"Like",className:"k-button k-flat",onClick:function(){return s.toggleLike(s.state.loggedInUserId,t.id)},style:{color:s.hasUserLikedMedia(s.state.loggedInUserId,t.id)?"#cc1516":""},children:Object(T.jsx)(m.a,{icon:p.d,size:"lg"})}),Object(T.jsx)("button",{className:"k-button k-flat",children:Object(T.jsx)(m.a,{icon:p.a,size:"lg",title:"Save"})})]}),Object(T.jsxs)("span",{className:"mr-5",style:{fontSize:"13px",alignSelf:"center",color:"#656565"},children:[s.fetchLikeCount(t.id)," likes"]})]})]})},t.id)},s.fetchData=function(e){return[new u(1,1,1,"Title","Caption","https://www.youtube.com/watch?v=Du74op2yMQc",["Song","Music"]),new u(2,1,1,"Title","Caption","https://www.imdb.com/title/tt12343534/",["Anime"]),new u(3,1,1,"Title","Caption","https://www.youtube.com/watch?v=Du74op2yMQc",["Song"]),new u(4,1,1,"Title","Caption","https://www.imdb.com/title/tt12343534/",["Anime"]),new u(5,1,1,"Title","Caption","https://www.youtube.com/watch?v=Du74op2yMQc",["Song","Music","Live Performance"]),new u(6,1,1,"Title","Caption","https://www.imdb.com/title/tt12343534/",["Anime"]),new u(7,1,1,"Title","Caption","https://www.youtube.com/watch?v=Du74op2yMQc",["Song"]),new u(8,1,1,"Title","Caption","https://www.imdb.com/title/tt12343534/",["Anime"]),new u(9,1,1,"Title","Caption","https://www.youtube.com/watch?v=Du74op2yMQc",["Song"]),new u(10,1,1,"Title","Caption","https://www.imdb.com/title/tt12343534/",["Anime"])]},s.state={mediaList:[],loggedInUserId:e.loggedInUserId},s}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;if(I.useApi)fetch(I.apiUrl+"/Discover",{method:"GET",crossDomain:!0,headers:{"Content-Type":"application/json"},mode:"cors",cache:"default"}).then((function(e){return e.json()})).then((function(t){e.setState({mediaList:t})})).catch((function(e){console.error(e)}));else{var t=this.fetchData();this.setState({mediaList:t})}}},{key:"render",value:function(){return Object(T.jsxs)("div",{className:"h-100",children:[Object(T.jsx)(S,{renderHome:!0,renderShare:!0}),Object(T.jsx)(h.a,{data:this.state.mediaList,item:this.itemRenderer,header:this.header,footer:this.footer})]})}},{key:"fetchUserImage",value:function(e){return Object(T.jsx)(m.a,{className:"mt-2",icon:p.e,size:"2x"})}},{key:"fetchUser",value:function(e){return new g(e,"Sample User")}},{key:"fetchLikeCount",value:function(e){return Math.floor(100*Math.random())}},{key:"hasUserLikedMedia",value:function(e,t){return Math.floor(10*Math.random())%2===0}},{key:"toggleLike",value:function(e,t){}}]),n}(s.Component),D=n(106),M=n(107),A=n(108),P=function(e){Object(o.a)(n,e);var t=Object(d.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(T.jsx)(D.a,{fluid:!0,className:"h-100",children:Object(T.jsxs)(M.a,{className:"h-100 w-100",children:[Object(T.jsx)(A.a,{onClick:function(){return window.location="/discover"},className:"App-section-discover App-transition",xs:12,md:6,children:Object(T.jsxs)("span",{className:"w-100 position-absolute",style:{marginTop:"50%",marginLeft:"-50%"},children:[Object(T.jsx)(m.a,{icon:p.c,size:"2x"}),"\xa0",Object(T.jsx)("h1",{children:"Discover"})]})}),Object(T.jsx)(A.a,{onClick:function(){return window.location="/share"},className:"App-section-share App-transition",xs:12,md:6,children:Object(T.jsxs)("span",{className:"w-100 position-absolute",style:{marginTop:"50%",marginLeft:"-50%"},children:[Object(T.jsx)(m.a,{icon:p.b,size:"2x"}),"\xa0",Object(T.jsx)("h1",{children:"Share"})]})})]})})}}]),n}(s.Component),R=n(66),z=n(11),H=n(60),F=n(54),E=n(34),Q=n(58),B=n(27),G=n(55),J=n(59),V=function(e){Object(o.a)(n,e);var t=Object(d.a)(n);function n(e){var s;return Object(r.a)(this,n),(s=t.call(this,e)).handleSubmit=function(e){var t={Id:0,Type:0,UserId:s.state.loggedInUserId,Title:e.media.title,Caption:e.media.caption,Url:e.media.url,Tags:s.state.selectedTags};return I.useApi&&fetch(I.apiUrl+"/Share",{method:"POST",crossDomain:!0,headers:{"Content-Type":"application/json"},mode:"cors",cache:"default",body:JSON.stringify(t)}).then((function(e){s.setState({showSuccessPopup:!0})})),!0},s.onDialogClose=function(){s.setState({showSuccessPopup:!1}),window.location="/Discover"},s.showSuccess=function(){return Object(T.jsx)("div",{children:Object(T.jsxs)(J.a,{title:"Delete Data",onClose:s.onDialogClose,children:[Object(T.jsx)("div",{children:Object(T.jsx)("p",{children:"Media shared successfully!"})}),Object(T.jsx)(J.b,{children:Object(T.jsx)("button",{className:"k-button k-primary",onClick:s.onDialogClose,children:"Done"})})]})})},s.validatedInput=function(e){var t=e.validationMessage,n=e.visited,s=Object(F.a)(e,["validationMessage","visited"]);return Object(T.jsxs)("div",{children:[Object(T.jsx)(Q.a,Object(H.a)({},s)),n&&t&&Object(T.jsx)(B.a,{children:t})]})},s.textAreaField=function(e){e.validationMessage,e.visited;var t=Object(F.a)(e,["validationMessage","visited"]);return Object(T.jsx)("div",{children:Object(T.jsx)(Q.d,Object(H.a)({rows:3,placeholder:"Tell us what you love about the media you're sharing"},t))})},s.handleTagsToggle=function(e){var t=e.filter((function(e){return e.isSelected})).map((function(e){return e.text}));s.setState({selectedTags:t})},s.tagsField=function(e){return Object(T.jsxs)("div",{children:[Object(T.jsx)("p",{style:{textAlign:"left"},children:"Choose one or more categories:"}),Object(T.jsx)(U,{onToggleSelect:s.handleTagsToggle})]})},s.validateUri=function(e){return Object(G.isUri)(e)?"":"Please enter a valid URL"},s.validateNullOrEmpty=function(e){return e&&e.length>0?"":"Please enter a Title"},s.handleUrlChange=function(e){s.setState({loggedInUserId:s.state.loggedInUserId,currentUrl:e?e.value:""})},s.state={loggedInUserId:e.loggedInUserId,currentUrl:"",selectedTags:[],showSuccessPopup:!1},s}return Object(l.a)(n,[{key:"render",value:function(){var e=this;return Object(T.jsxs)(D.a,{className:"h-100",children:[Object(T.jsx)(M.a,{style:{height:"20%"},children:Object(T.jsx)(S,{renderHome:!0,renderDiscover:!0})}),Object(T.jsxs)(M.a,{children:[Object(T.jsxs)(A.a,{xs:12,md:6,children:[Object(T.jsx)(E.b,{onSubmit:this.handleSubmit,render:function(t){return Object(T.jsxs)(E.c,{style:{maxWidth:650},children:[Object(T.jsxs)("fieldset",{className:"k-form-fieldset",children:[Object(T.jsx)("legend",{className:"k-form-legend",children:"What would you like to share today"}),t.visited&&t.errors&&t.errors.VALIDATION_SUMMARY&&Object(T.jsx)("div",{className:"k-messagebox k-messagebox-error",children:t.errors.VALIDATION_SUMMARY}),Object(T.jsx)("div",{className:"mb-3",children:Object(T.jsx)(E.a,{name:"media.url",component:e.validatedInput,label:"Media URL",validator:e.validateUri,onChange:e.handleUrlChange})}),Object(T.jsx)("div",{className:"mb-3",children:Object(T.jsx)(E.a,{name:"media.title",component:e.validatedInput,label:"Title",validator:e.validateNullOrEmpty})}),Object(T.jsx)("div",{className:"mb-3",children:Object(T.jsx)(E.a,{name:"media.caption",component:e.textAreaField,label:"Caption"})}),Object(T.jsx)("div",{className:"mb-3",children:Object(T.jsx)(E.a,{name:"media.tags",component:e.tagsField})})]}),Object(T.jsx)("div",{className:"k-form-buttons",children:Object(T.jsx)("button",{type:"submit",className:"btn btn-secondary btn-md",disabled:!t.allowSubmit,children:"Share"})})]})}}),this.state.showSuccessPopup&&this.showSuccess()]}),Object(T.jsxs)(A.a,{xs:12,md:6,children:[Object(T.jsx)("h5",{children:"Preview"}),this.renderPreview()]})]})]})}},{key:"renderPreview",value:function(){return this.state.currentUrl&&Object(G.isUri)(this.state.currentUrl)?Object(T.jsx)("div",{className:"mt-4",children:Object(T.jsx)(b.ReactTinyLink,{cardSize:"small",showGraphic:!0,maxLine:2,minLine:1,url:this.state.currentUrl})}):Object(T.jsx)("p",{className:"text-info",children:"Enter a media URL to see its preview"})}}]),n}(s.Component),W=function(e){Object(o.a)(n,e);var t=Object(d.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(T.jsx)("div",{className:"App h-100",children:Object(T.jsx)(R.a,{children:Object(T.jsxs)(z.c,{children:[Object(T.jsx)(z.a,{path:"/discover",children:Object(T.jsx)(L,{loggedInUserId:1})}),Object(T.jsx)(z.a,{path:"/share",children:Object(T.jsx)(V,{loggedInUserId:1})}),Object(T.jsx)(z.a,{path:"/",children:Object(T.jsx)(P,{})})]})})})}}]),n}(s.Component),Y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,114)).then((function(t){var n=t.getCLS,s=t.getFID,i=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),s(e),i(e),a(e),c(e)}))};c.a.render(Object(T.jsx)(i.a.StrictMode,{children:Object(T.jsx)(W,{})}),document.getElementById("root")),Y()},74:function(e,t,n){},77:function(e,t,n){}},[[100,1,2]]]);
//# sourceMappingURL=main.48f9cf47.chunk.js.map